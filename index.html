<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>셀프 체크리스트</title>
  <style>
    body { font-family: 'Apple SD Gothic Neo', sans-serif; background:#fff; color:#333; margin:0; padding:2rem; max-width:600px; margin:auto; }
    h1 { text-align:center; color:#444; font-size:1.8rem; margin-bottom:2rem; }
    .section { margin-bottom:2.5rem; }
    h2 { font-size:1.3rem; color:#2c3e50; margin-bottom:1rem; }
    label { display:block; margin-bottom:0.6rem; cursor:pointer; }
    textarea, input[type="text"] { width:100%; margin-top:0.5rem; padding:0.5rem; border:1px solid #ccc; border-radius:6px; }
    .note { font-size:0.9rem; color:#777; margin-top:0.5rem; }
    button { padding:0.7rem 1.5rem; font-size:1rem; border:none; border-radius:5px; background:#2c3e50; color:#fff; cursor:pointer; }
    #result { display:none; }
  </style>
</head>
<body>
  <h1>📘 나의 셀프 상태 점검</h1>

  <!-- ========== FORM ========== -->
  <div id="form">
    <!-- 1. 감정 체크 -->
    <div class="section" id="emotion">
      <h2>1. 이번 주 감정 체크</h2>
      <label><input type="checkbox" /> 두려움</label>
      <label><input type="checkbox" /> 분노</label>
      <label><input type="checkbox" /> 수치심</label>
      <label><input type="checkbox" /> 혼란</label>
      <label><input type="checkbox" /> 지침 / 피로</label>
      <label><input type="checkbox" /> 무감각 / 공허</label>
      <label><input type="checkbox" /> 무기력</label>
      <label><input type="checkbox" /> 우울</label>
      <label><input type="checkbox" /> 평안 (샬롬)</label>
      <label><input type="checkbox" /> 기쁨</label>
      <label><input type="checkbox" /> 기대감</label>
      <label><input type="text" placeholder="기타 감정..." /></label>
    </div>

    <!-- 2. 근원과 시선 -->
    <div class="section" id="origin">
      <h2>2. 감정의 근원과 시선 방향</h2>
      <label><input type="checkbox" /> 사람의 반응</label>
      <label><input type="checkbox" /> 내 상태나 능력</label>
      <label><input type="checkbox" /> 과거의 경험</label>
      <label><input type="checkbox" /> 미래에 대한 불안 / 기대</label>
      <label><input type="checkbox" /> 상황 자체</label>
      <label><input type="checkbox" /> 내 감정 자체</label>
      <label><input type="checkbox" /> 하나님의 성품 / 말씀</label>
      <label><input type="checkbox" /> 십자가</label>
      <label><input type="checkbox" /> 공동체</label>
      <label><input type="checkbox" /> 사명 / 비전</label>
      <label><input type="checkbox" /> 정체 모름 (흐릿함)</label>
    </div>

    <!-- 3. 반복된 생각 -->
    <div class="section" id="thoughts">
      <h2>3. 반복된 생각/말/행동</h2>
      <textarea placeholder="이번 주 자주 떠오른 생각, 말, 행동을 간단히 기록해보세요."></textarea>
    </div>

    <!-- 4. 내 반응 -->
    <div class="section" id="reaction">
      <h2>4. 내 반응</h2>
      <label><input type="checkbox" /> 예배나 기도를 피하거나 미뤘다</label>
      <label><input type="checkbox" /> 말씀 묵상이나 적용을 멈췄다</label>
      <label><input type="checkbox" /> 감정을 억눌렀거나 폭발시켰다</label>
      <label><input type="checkbox" /> 관계를 피하거나 단절시켰다</label>
      <label><input type="checkbox" /> 자극적이거나 중독적인 행동을 반복했다</label>
      <label><input type="checkbox" /> 비교, 자책, 부정적인 생각이 많았다</label>
      <label><input type="checkbox" /> 겉으론 괜찮지만 내면은 지쳐 있었다</label>
      <label><input type="checkbox" /> 타인을 판단하거나 원망했다</label>
      <label><input type="checkbox" /> 일부러 바쁘게 움직이며 감정을 회피했다</label>
      <div class="note">※ 3개 이상 체크 시 감정 주도 반응, 5개 이상은 회복이 필요합니다.</div>
    </div>

    <!-- 5. 영적 흐름 진단 -->
    <div class="section" id="flow">
      <h2>🧭 영적 흐름 진단 (자가 체크)</h2>
      <label><input type="checkbox" id="q108" /> 말씀보다 내 느낌이나 계시에 더 의지했다</label>
      <label><input type="checkbox" id="q109" /> 리더나 멘토의 조언보다 내 판단을 우선했다</label>
      <label><input type="checkbox" id="q110" /> 공동체보다 내 영적 경험을 더 신뢰했다</label>
      <label><input type="checkbox" id="q111" /> 감정이 흐트러지면 말씀을 피하게 된다</label>
      <label><input type="checkbox" id="q112" /> 피드백 없이 내 방식대로 결정했다</label>
      <label><input type="checkbox" id="q114" /> 은혜가 느껴지지 않으면 예배/기도를 멈춘다</label>
      <label><input type="checkbox" id="q115" /> 감정적 자극 없이는 집중이 어렵다</label>
      <label><input type="checkbox" id="q150" /> 음란 콘텐츠나 행동이 반복된다</label>
      <label><input type="checkbox" id="q151" /> 자극적인 모임/신앙만 선호한다</label>
      <label><input type="checkbox" id="q152" /> 감정 기복에 따라 예배 태도가 바뀐다</label>
      <label><input type="checkbox" id="q120" /> 다른 사람의 축복이 불편하게 느껴진다</label>
      <label><input type="checkbox" id="q121" /> 항상 부족하다는 생각이 든다</label>
      <label><input type="checkbox" id="q122" /> 자원을 잃을까 두려워 나눔을 꺼린다</label>
      <label><input type="checkbox" id="q123" /> 도움을 요청하는 게 자존심 상한다</label>
      <label><input type="checkbox" id="q124" /> 하나님의 공급보다 자원에 의존한다</label>
      <label><input type="checkbox" id="q126" /> 내 생각이 리더보다 옳다고 느껴진다</label>
      <label><input type="checkbox" id="q127" /> 공동체 내에서 자주 거리감을 느껴진다</label>
      <label><input type="checkbox" id="q128" /> 비판적 언행을 자주 하게 된다</label>
      <label><input type="checkbox" id="q129" /> 권위자를 신뢰하기 어렵다</label>
      <label><input type="checkbox" id="q130" /> 나만의 방식으로 따로 행동하려 한다</label>
      <label><input type="checkbox" id="q132" /> 사람들과 있는 것이 피곤하고 불편하다</label>
      <label><input type="checkbox" id="q133" /> 예배/기도에 점점 소극적이다</label>
      <label><input type="checkbox" id="q134" /> 아무도 내 상황을 이해 못한다고 느껴진다</label>
      <label><input type="checkbox" id="q135" /> 공동체에 있어도 외롭다</label>
      <label><input type="checkbox" id="q136" /> 아예 아무것도 하기 싫고 방에만 있고 싶다</label>
    </div>

    <div class="section">
      <button type="button" onclick="showResult()">제출하고 결과 보기</button>
    </div>
  </div>

  <!-- ========== RESULT ========== -->
  <div id="result">
    <h2>📊 결과 요약</h2>
    <ul>
      <li>많이 체크된 감정 반응: <strong id="reactionResult"></strong></li>
      <li>가장 영향을 끼친 흐름: <strong id="flowResult"></strong></li>
    </ul>
    <div class="note">새로고침하면 다시 작성할 수 있습니다.</div>
  </div>

  <script>
    function showResult() {
      // 감정 반응 집계
      const rCount = document.querySelectorAll('#reaction input[type=checkbox]:checked').length;
      const rText = rCount >= 5 ? '감정에 강하게 이끌린 반응' : rCount >= 3 ? '감정 주도 반응 있음' : '안정적';
      document.getElementById('reactionResult').innerText = rText;

      // 영적 흐름 진단 집계
      const ranges = {
        '미혹': [108,112],
        '음란': [150,152],
        '가난': [120,124],
        '분열': [126,130],
        '고립': [132,136],
        '왜곡': [138,142],
        '종교': [144,148]
      };
      let flowCounts = {};
      Object.entries(ranges).forEach(([flow,[s,e]]) => {
        let cnt = 0;
        for (let i=s; i<=e; i++) {
          const el = document.getElementById(`q${i}`);
          if (el && el.checked) cnt++;
        }
        flowCounts[flow] = cnt;
      });
      const [topFlow, topNum] = Object.entries(flowCounts).sort((a,b)=>b[1]-a[1])[0] || [null,0];
      const flowText = topNum > 0 ? `지금 ${topFlow} 흐름에 영향받고 있습니다. (${topNum}개)` : '특별히 두드러지는 흐름 없음';
      document.getElementById('flowResult').innerText = flowText;

      // 토글
      document.getElementById('form').style.display = 'none';
      document.getElementById('result').style.display = 'block';
    }
  </script>
</body>
</html>
